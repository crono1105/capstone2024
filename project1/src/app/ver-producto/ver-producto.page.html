<ion-header>
  <ion-buttons slot="start">
    <ion-back-button defaultHref="/login"></ion-back-button>
    <ion-back-button defaultHref="/home"></ion-back-button>
  </ion-buttons>
</ion-header>

<ion-content class="">
  <ion-title>Detalle del Producto</ion-title>

  <ion-card *ngIf="detalleProducto">
    <ion-card-header>
      <ion-card-title>{{ detalleProducto.nombre_producto }}</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <ion-img [src]="detalleProducto.img_producto" *ngIf="detalleProducto.img_producto"></ion-img>

      <ion-list>
        <ion-col>
          <ion-item>
            <ion-label>Precio</ion-label>
            <ion-text>{{ detalleProducto.precio }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Stock</ion-label>
            <ion-text>{{ detalleProducto.stock }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Empresa</ion-label>
            <ion-text>{{ detalleProducto.nombre_empresa }}</ion-text>
          </ion-item>

          <ion-item>
            <ion-label>Categoria</ion-label>
            <ion-text>{{ detalleProducto.nombre_categoria }}</ion-text>
          </ion-item>
          <ion-item>
            <ion-label>Direccion</ion-label>
            <ion-text>{{detalleProducto.direccion}},{{ detalleProducto.nombre_comuna }}</ion-text>
          </ion-item>

        </ion-col>

      

        





      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Agrega el elemento canvas para el gráfico -->

  <ion-button expand="full" routerLink="/productos">Volver a la lista de productos</ion-button>


<ion-list>
  <ion-item lines="none" class="header-item">
    <ion-label class="header-label">Fecha</ion-label>
    <ion-label class="header-label">Precio</ion-label>
  </ion-item>

  <ion-item *ngFor="let actualizacion of datosGrafico">
    <ion-label class="date-label">{{ actualizacion.fecha_actualizacion | date: 'dd/MM/yyyy' }}</ion-label>
    <ion-label class="price-label">{{ actualizacion.valor }}</ion-label>
  </ion-item>


  <!--boton ver mapa-->
  <ion-button (click)="goToVerMapa(detalleProducto.rut_empresa)">MAPA</ion-button>
  <ion-button (click)="goToCrearReview(detalleProducto.id_producto)">AGREGAR RESEÑA</ion-button>
</ion-list>


<ion-card *ngIf="resenas.length > 0">
  <ion-card-header>
    <ion-card-title>Reseñas</ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <ion-list>
      <ion-item *ngFor="let resena of resenas">
        <ion-label>{{ resena.comentario }}</ion-label>
        <p>{{resena.valoracion}}</p>
       
      </ion-item>
    </ion-list>
  </ion-card-content>
</ion-card>

<h2>Promedio de Valoración: {{ promedioValoracion }}</h2>


</ion-content>